<!doctype html>
<html lang="en">

<head>
  <title>Login 08</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/adminlogin.css">


</head>

<body>
  <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <!------ Include the above in your HEAD tag ---------->

  <div class="wrapper fadeInDown">
    <div id="formContent">
      <!-- Tabs Titles -->

      <!-- Icon -->
      <div class="fadeIn first">
        <img src="/assets/images/logo.png" style="width:150px;" class="p-3" id="icon" alt="User Icon" />
      </div>
      <div class="p-5">
        <!-- Login Form -->
        <form action="" method="post" onsubmit="">
          <input type="email" id="login" class="fadeIn second px-5 mt-1   py-4 bg-light border-0 form-control" name="email" placeholder="Email Id">
          <p class="text-danger mb-1 fw-light opacity-75" id="emailidwarning"></p>
          <input type="password" id="password" class="fadeIn mt-3  third px-5 py-4 bg-light border-0 form-control" name="password" placeholder="Password">
          <p class="text-danger  mb-1 fw-light opacity-75" id="passwordidwarning"></p>
          <input type="submit" onclick="validate()" class="fadeIn fourth " value="Admin Log In">

          <p class="text-danger" id="errmsg"></p>

        </form>
      </div>
      <!-- Remind Passowrd -->
      <div id="formFooter">
        <a class="underlineHover" href="#">Forgot Password?</a>
      </div>

    </div>
  </div>

  <script>
    function validate() {
      let email = document.getElementById('login')
      let password = document.getElementById('password')
      let emailwarning = document.getElementById('emailidwarning')
      let passwordwarning = document.getElementById('passwordidwarning')
      document.getElementById("errmsg").innerHTML = ""
      event.preventDefault();
      let form = event.target.form;
      let validation = true;
      emailwarning.innerHTML = "";
      passwordwarning.innerHTML = "";
      if (email.value === "") {
        emailwarning.innerHTML = "Please enter your email id"
        validation = false
      }
      if (password.value === "") {
        passwordwarning.innerHTML = "Please enter your password"
        validation = false
      }
      if (validation) {
        email = email.value
        password = password.value
        try {
          axios.post('/admin/login', {
            email: email,
            password: password
          }).then((e) => {
            if (!e.data.response) {
              form.submit();
              location.href = '/admin';
            } else {
              document.getElementById("errmsg").innerHTML = "Invalid credentials";
            }
          })
        } catch (error) {
          console.log(error)
        }
        return validation
      }
    }
  </script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <script>

  </script>

  <script src="js/jquery.min.js"></script>
  <script src="js/popper.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/main.js"></script>

</body>

</html>